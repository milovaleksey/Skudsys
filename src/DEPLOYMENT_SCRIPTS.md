# üöÄ –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã UTMN Security –∏–∑ –ø–∞–ø–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ `/opt/utmn-security` –≤ production `/var/www/utmn-security`.

---

## üìã –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

| –°–∫—Ä–∏–ø—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|--------|----------|---------------|
| `deploy-from-sync.sh` | **–ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç |
| `quick-deploy.sh` | **–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π | –î–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π |
| `rollback.sh` | **–û—Ç–∫–∞—Ç** –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ | –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö |
| `status.sh` | **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |

---

## üöÄ deploy-from-sync.sh

### –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
- ‚úÖ –°–±–æ—Ä–∫–∞ frontend
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π backend
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π nginx/systemd
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
sudo chmod +x deploy-from-sync.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo ./deploy-from-sync.sh
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∏**
   - –ü—Ä–∞–≤–∞ root
   - –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
   - –ù–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤

2. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –°–æ–∑–¥–∞–µ—Ç backup –≤ `/var/backups/utmn-security/backup_YYYYMMDD_HHMMSS`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–ø–∏–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π

3. **–°–±–æ—Ä–∫–∞ frontend**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç/—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç `npm run build`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `dist`

4. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
   - –ö–æ–ø–∏—Ä—É–µ—Ç `frontend/dist/*` ‚Üí `/var/www/utmn-security/frontend/`
   - –ö–æ–ø–∏—Ä—É–µ—Ç `backend/` ‚Üí `/var/www/utmn-security/backend/`
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ backend
   - –û–±–Ω–æ–≤–ª—è–µ—Ç nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
   - –û–±–Ω–æ–≤–ª—è–µ—Ç systemd —Å–µ—Ä–≤–∏—Å

5. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
   - –í–ª–∞–¥–µ–ª–µ—Ü: `www-data:www-data`
   - –§–∞–π–ª—ã: `644`
   - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: `755`
   - –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ: `755`

6. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫**
   - `systemctl restart utmn-security`
   - `systemctl reload nginx`

7. **–ü—Ä–æ–≤–µ—Ä–∫–∞**
   - Health check: `http://localhost:3000/health`
   - Frontend check: `http://localhost/`

### –õ–æ–≥–∏

```bash
# –õ–æ–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
tail -f /var/log/utmn-security-deploy.log
```

### –ü—Ä–∏ –æ—à–∏–±–∫–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.

---

## ‚ö° quick-deploy.sh

### –û–ø–∏—Å–∞–Ω–∏–µ
–ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤. –î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
sudo chmod +x quick-deploy.sh
sudo ./quick-deploy.sh
```

### –û—Ç–ª–∏—á–∏—è –æ—Ç –ø–æ–ª–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

- ‚ùå –ù–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ùå –ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

**‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —É–≤–µ—Ä–µ–Ω—ã –≤ –∫–æ–¥–µ!**

---

## üîÑ rollback.sh

### –û–ø–∏—Å–∞–Ω–∏–µ
–û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
sudo chmod +x rollback.sh
sudo ./rollback.sh
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä:

```
–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:

  [0] 20260125 143022 (—Ä–∞–∑–º–µ—Ä: 45M)
  [1] 20260125 120530 (—Ä–∞–∑–º–µ—Ä: 44M)
  [2] 20260124 183015 (—Ä–∞–∑–º–µ—Ä: 43M)

–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–∏–ª–∏ Enter –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–π):
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç:

1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
2. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≤–µ—Ä—Å–∏—é –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
3. –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
4. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã
6. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π

```bash
ls -lh /var/backups/utmn-security/
```

---

## üìä status.sh

### –û–ø–∏—Å–∞–Ω–∏–µ
–ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
chmod +x status.sh
./status.sh  # –ù–µ —Ç—Ä–µ–±—É–µ—Ç sudo –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
```

### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

#### üîß –°–µ—Ä–≤–∏—Å—ã
- Backend (utmn-security) - —Å—Ç–∞—Ç—É—Å –∏ uptime
- Nginx - —Å—Ç–∞—Ç—É—Å
- MySQL - —Å—Ç–∞—Ç—É—Å

#### üåê Endpoints
- Backend API (http://localhost:3000/health)
- Frontend (http://localhost/)
- API —á–µ—Ä–µ–∑ Nginx (http://localhost/v1/health)

#### üìÅ –§–∞–π–ª—ã
- Frontend - —Ä–∞–∑–º–µ—Ä –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- Backend - —Ä–∞–∑–º–µ—Ä –∏ –≤–µ—Ä—Å–∏—è
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π

#### üíª –†–µ—Å—É—Ä—Å—ã
- Backend –ø–∞–º—è—Ç—å
- Disk usage
- Load average

#### üîå –ü–æ—Ä—Ç—ã
- 3000 - Backend
- 80 - HTTP
- 443 - HTTPS
- 3306 - MySQL

#### üìù –õ–æ–≥–∏
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–æ–±—ã—Ç–∏–π backend

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã UTMN Security
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üîß –°–µ—Ä–≤–∏—Å—ã:

‚óè Backend (utmn-security) - —Ä–∞–±–æ—Ç–∞–µ—Ç
   –ó–∞–ø—É—â–µ–Ω: Sun 2026-01-25 14:30:22 UTC
‚óè Nginx - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚óè MySQL - —Ä–∞–±–æ—Ç–∞–µ—Ç

üåê Endpoints:

‚óè Backend API (http://localhost:3000/health)
   {"status":"ok","timestamp":"2026-01-25T14:35:10.123Z"}
‚óè Frontend (http://localhost/)
‚óè API —á–µ—Ä–µ–∑ Nginx (http://localhost/v1/health)

üìÅ –§–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

‚óè Frontend: 2.1M (127 —Ñ–∞–π–ª–æ–≤)
‚óè Backend: 18M
   –í–µ—Ä—Å–∏—è: 1.0.0
‚óè –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏: 3 (—Ä–∞–∑–º–µ—Ä: 135M)
   –ü–æ—Å–ª–µ–¥–Ω—è—è: 20260125 143022

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç (4/4)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
/opt/utmn-security/          # –ü–∞–ø–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ dist/               # –°–æ–±—Ä–∞–Ω–Ω—ã–π frontend (–ø–æ—Å–ª–µ npm run build)
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ backend/
    ‚îú‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ package.json
    ‚îî‚îÄ‚îÄ ...

/var/www/utmn-security/      # Production
‚îú‚îÄ‚îÄ frontend/               # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ /opt/utmn-security/frontend/dist
‚îî‚îÄ‚îÄ backend/                # –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ /opt/utmn-security/backend

/var/backups/utmn-security/  # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îú‚îÄ‚îÄ backup_20260125_143022/
‚îú‚îÄ‚îÄ backup_20260125_120530/
‚îî‚îÄ‚îÄ backup_20260124_183015/
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö

```bash
SYNC_DIR="/opt/utmn-security"        # –ü–∞–ø–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
PROD_DIR="/var/www/utmn-security"    # Production
SERVICE_NAME="utmn-security"         # Systemd —Å–µ—Ä–≤–∏—Å
BACKUP_DIR="/var/backups/utmn-security"  # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—É—Ç–µ–π

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

```bash
nano deploy-from-sync.sh
# –ò–∑–º–µ–Ω–∏—Ç–µ SYNC_DIR, PROD_DIR –∏ —Ç.–¥.
```

---

## üìù –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### 1. –ü–µ—Ä–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞
sudo chmod +x deploy-from-sync.sh rollback.sh status.sh quick-deploy.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
sudo ./deploy-from-sync.sh

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
./status.sh
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
sudo ./quick-deploy.sh

# –ò–ª–∏ –ø–æ–ª–Ω–æ–µ —Å —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º
sudo ./deploy-from-sync.sh
```

### 3. –ü—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```bash
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
sudo ./rollback.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./status.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u utmn-security -n 100
```

### 4. –†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./status.sh

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u utmn-security -f
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤–∞ root (sudo) –∫—Ä–æ–º–µ `status.sh`.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤
sudo chmod 750 deploy-from-sync.sh
sudo chmod 750 rollback.sh
sudo chmod 750 quick-deploy.sh
sudo chmod 755 status.sh

# –í–ª–∞–¥–µ–ª–µ—Ü - root
sudo chown root:root *.sh
```

### –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∫–æ–ø–∏–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π.

–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è:

```bash
# –í deploy-from-sync.sh –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
find "$BACKUP_DIR" -type d -name "backup_*" -mtime +7 -exec rm -rf {} +

# –ò–∑–º–µ–Ω–∏—Ç–µ +7 –Ω–∞ –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π
```

---

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
ls -lh deploy-from-sync.sh

# –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞
sudo chmod +x deploy-from-sync.sh
```

### –û—à–∏–±–∫–∞ "No such file or directory"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏
ls -la /opt/utmn-security/
ls -la /var/www/utmn-security/

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sudo mkdir -p /var/www/utmn-security
sudo mkdir -p /var/backups/utmn-security
```

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
sudo journalctl -u utmn-security -n 50

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo systemctl status utmn-security

# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
cd /var/www/utmn-security/backend
node src/server.js
```

### Nginx –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã
ls -la /var/www/utmn-security/frontend/
```

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `/systemd/utmn-security.service` - Systemd —Å–µ—Ä–≤–∏—Å
- `/nginx/utmn-security.conf` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
- `/BUGFIX_AUTH_TOKEN.md` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `/BUILD_AND_DEPLOY.sh` - –°—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ (deprecated)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –õ–æ–≥–∏

```bash
# Backend
sudo journalctl -u utmn-security -f --no-pager

# Nginx access
sudo tail -f /var/log/nginx/access.log

# Nginx error
sudo tail -f /var/log/nginx/error.log

# –í—Å–µ –ª–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã
sudo journalctl -xe
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –°—Ç–∞—Ç—É—Å
sudo systemctl status utmn-security
sudo systemctl status nginx

# –°—Ç–∞—Ä—Ç/—Å—Ç–æ–ø
sudo systemctl start utmn-security
sudo systemctl stop utmn-security
sudo systemctl restart utmn-security

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo systemctl reload nginx
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:3000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ frontend
curl http://localhost/

# –° –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
curl -I http://localhost/
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 25.01.2026  
**–í–µ—Ä—Å–∏—è:** 1.0.0
