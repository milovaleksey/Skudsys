# –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¢—é–º–ì–£

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å —Ä–æ–ª–µ–≤—ã–º –¥–æ—Å—Ç—É–ø–æ–º, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –ø—Ä–æ—Ö–æ–¥–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (AD/SSO).

---

üìö **[–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Üí](DOCS_INDEX.md)**

üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:** [START.md](START.md)  
üîß **MySQL –¥–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ:** [MYSQL_EXTERNAL_ACCESS.md](MYSQL_EXTERNAL_ACCESS.md)  
üíª **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:** [DEVELOPER_GUIDE.md](DEVELOPER_GUIDE.md)  
üìñ **–®–ø–∞—Ä–≥–∞–ª–∫–∞:** [QUICK_REFERENCE.md](QUICK_REFERENCE.md)

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Frontend:**
- React 18 + TypeScript
- Vite
- Tailwind CSS v4
- Shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**Backend:**
- Node.js + Express
- JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- MySQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (11 —Ç–∞–±–ª–∏—Ü)
- 30+ REST API endpoints

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Nginx (reverse proxy)
- Debian —Å–µ—Ä–≤–µ—Ä
- HTTP (–∑–∞ reverse proxy, –±–µ–∑ HTTPS –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —É—Ä–æ–≤–Ω–µ)

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- **–û–°:** Debian 10/11/12 –∏–ª–∏ Ubuntu 20.04/22.04
- **RAM:** –ú–∏–Ω–∏–º—É–º 2GB
- **CPU:** 2 —è–¥—Ä–∞
- **–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ:** 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–°–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø:** –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã 80, 3001, 3306

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å ZIP –∞—Ä—Ö–∏–≤
git clone <repository-url> /opt/utmn-security
cd /opt/utmn-security

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
chmod +x deploy.sh
sudo ./deploy.sh

# 3. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (10-15 –º–∏–Ω—É—Ç)
# - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Node.js, npm, MySQL, Nginx)
# - –°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
# - –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
# - –°–æ–∑–¥–∞—Å—Ç –∞–¥–º–∏–Ω–∞ (–ª–æ–≥–∏–Ω: admin, –ø–∞—Ä–æ–ª—å: admin123)
# - –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å—ã
```

### –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

**–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** http://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä/

**–ü–µ—Ä–≤–∏—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin123`

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ MySQL –∏–∑–≤–Ω–µ

### 1. –û—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ MySQL –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é MySQL
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf

# –ù–∞–π—Ç–∏ –∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
# bind-address = 127.0.0.1
# –Ω–∞:
bind-address = 0.0.0.0

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å MySQL
sudo systemctl restart mysql
```

### 2. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

```bash
# –í–æ–π—Ç–∏ –≤ MySQL
sudo mysql -u root -p

# –í –∫–æ–Ω—Å–æ–ª–∏ MySQL –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```

```sql
-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–æ—Å—Ç—É–ø–æ–º —Å –ª—é–±–æ–≥–æ —Ö–æ—Å—Ç–∞
CREATE USER 'utmn_remote'@'%' IDENTIFIED BY '–í–ê–®_–ù–ê–î–ï–ñ–ù–´–ô_–ü–ê–†–û–õ–¨';

-- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –±–∞–∑—É utmn_security
GRANT ALL PRIVILEGES ON utmn_security.* TO 'utmn_remote'@'%';

-- –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
FLUSH PRIVILEGES;

-- –í—ã–π—Ç–∏
EXIT;
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –¥–ª—è –ø–æ—Ä—Ç–∞ MySQL

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ufw
sudo ufw allow 3306/tcp
sudo ufw reload

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è firewalld
sudo firewall-cmd --permanent --add-port=3306/tcp
sudo firewall-cmd --reload

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è iptables
sudo iptables -A INPUT -p tcp --dport 3306 -j ACCEPT
sudo iptables-save > /etc/iptables/rules.v4
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–≤–Ω–µ

```bash
# –° —É–¥–∞–ª–µ–Ω–Ω–æ–π –º–∞—à–∏–Ω—ã
mysql -h IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê -u utmn_remote -p utmn_security

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é telnet
telnet IP_–í–ê–®–ï–ì–û_–°–ï–†–í–ï–†–ê 3306
```

### 5. –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MySQL:**
```
–•–æ—Å—Ç: IP_–∞–¥—Ä–µ—Å_–≤–∞—à–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞
–ü–æ—Ä—Ç: 3306
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: utmn_security
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: utmn_remote
–ü–∞—Ä–æ–ª—å: –í–ê–®_–ù–ê–î–ï–ñ–ù–´–ô_–ü–ê–†–û–õ–¨
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞ –∫ MySQL

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 1. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ IP-–∞–¥—Ä–µ—Å–∞–º

–í–º–µ—Å—Ç–æ –¥–æ—Å—Ç—É–ø–∞ —Å –ª—é–±–æ–≥–æ —Ö–æ—Å—Ç–∞ (`'%'`), —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ IP:

```sql
-- –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–æ—Å—Ç—É–ø–æ–º –æ—Ç–æ–≤—Å—é–¥—É
DROP USER 'utmn_remote'@'%';

-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP
CREATE USER 'utmn_remote'@'IP_–ê–î–†–ï–°_–ö–õ–ò–ï–ù–¢–ê' IDENTIFIED BY '–í–ê–®_–ü–ê–†–û–õ–¨';
GRANT ALL PRIVILEGES ON utmn_security.* TO 'utmn_remote'@'IP_–ê–î–†–ï–°_–ö–õ–ò–ï–ù–¢–ê';
FLUSH PRIVILEGES;

-- –ò–ª–∏ –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 192.168.1.0/24)
CREATE USER 'utmn_remote'@'192.168.1.%' IDENTIFIED BY '–í–ê–®_–ü–ê–†–û–õ–¨';
GRANT ALL PRIVILEGES ON utmn_security.* TO 'utmn_remote'@'192.168.1.%';
FLUSH PRIVILEGES;
```

#### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
openssl rand -base64 32
```

#### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL –¥–ª—è MySQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è MySQL
sudo mysql_ssl_rsa_setup --uid=mysql

# –í /etc/mysql/mysql.conf.d/mysqld.cnf –¥–æ–±–∞–≤–∏—Ç—å:
# ssl-ca=/var/lib/mysql/ca.pem
# ssl-cert=/var/lib/mysql/server-cert.pem
# ssl-key=/var/lib/mysql/server-key.pem

# –¢—Ä–µ–±–æ–≤–∞—Ç—å SSL –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
ALTER USER 'utmn_remote'@'%' REQUIRE SSL;
FLUSH PRIVILEGES;
```

#### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

```bash
# –†–∞–∑—Ä–µ—à–∏—Ç—å MySQL —Ç–æ–ª—å–∫–æ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ IP
sudo ufw allow from IP_–ê–î–†–ï–°_–ö–õ–ò–ï–ù–¢–ê to any port 3306

# –ò–ª–∏ –¥–ª—è –ø–æ–¥—Å–µ—Ç–∏
sudo ufw allow from 192.168.1.0/24 to any port 3306
```

#### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
SHOW PROCESSLIST;

-- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo tail -f /var/log/mysql/error.log
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (11 —Ç–∞–±–ª–∏—Ü)

1. **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
2. **roles** - —Ä–æ–ª–∏ –¥–æ—Å—Ç—É–ø–∞
3. **permissions** - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
4. **role_permissions** - —Å–≤—è–∑—å —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤
5. **role_external_groups** - –º–∞–ø–ø–∏–Ω–≥ –≤–Ω–µ—à–Ω–∏—Ö –≥—Ä—É–ø–ø AD/SSO
6. **students** - –¥–∞–Ω–Ω—ã–µ –æ —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö
7. **employees** - –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö
8. **access_logs** - –ª–æ–≥–∏ –ø—Ä–æ—Ö–æ–¥–æ–≤
9. **parking** - –ø–∞—Ä–∫–æ–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
10. **storage** - —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—â–µ–π
11. **user_logs** - –ª–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## API endpoints

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
- `POST /api/auth/login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `POST /api/auth/logout` - –≤—ã—Ö–æ–¥
- `POST /api/auth/sso` - SSO –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- `GET /api/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /api/users` - —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/users/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /api/users/:id` - —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–æ–ª–∏:**
- `GET /api/roles` - —Å–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π
- `POST /api/roles` - —Å–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å
- `PUT /api/roles/:id` - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å
- `DELETE /api/roles/:id` - —É–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å
- `GET /api/roles/:id/external-groups` - –≥—Ä—É–ø–ø—ã AD/SSO –¥–ª—è —Ä–æ–ª–∏
- `POST /api/roles/:id/external-groups` - –¥–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É AD/SSO

**–°—Ç—É–¥–µ–Ω—Ç—ã:**
- `GET /api/students` - —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- `GET /api/students/:id` - –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–∞

**–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏:**
- `GET /api/employees` - —Å–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `GET /api/employees/:id` - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–ü—Ä–æ—Ö–æ–¥—ã:**
- `GET /api/access-logs` - –ª–æ–≥–∏ –ø—Ä–æ—Ö–æ–¥–æ–≤
- `GET /api/access-logs/export` - —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel

**–ü–∞—Ä–∫–æ–≤–∫–∞:**
- `GET /api/parking` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—Ä–∫–æ–≤–∫–∏
- `POST /api/parking/entry` - –≤—ä–µ–∑–¥
- `POST /api/parking/exit` - –≤—ã–µ–∑–¥

**–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
- `GET /api/analytics/students` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
- `GET /api/analytics/employees` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# Node.js v18 –∏–ª–∏ –≤—ã—à–µ
node --version

# npm v9 –∏–ª–∏ –≤—ã—à–µ
npm --version

# MySQL 8.0 –∏–ª–∏ –≤—ã—à–µ
mysql --version
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
cd backend && npm install && cd ..

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
mysql -u root -p < database/schema.sql

# 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
# –°–æ–∑–¥–∞—Ç—å backend/.env:
# DB_HOST=localhost
# DB_USER=root
# DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
# DB_NAME=utmn_security
# JWT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
# PORT=3001

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
cd backend
npm start

# 5. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å frontend
npm run dev
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

–§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `/etc/nginx/sites-available/utmn-security`

```nginx
server {
    listen 80;
    server_name –≤–∞—à-–¥–æ–º–µ–Ω.ru;

    # Frontend
    location / {
        proxy_pass http://localhost:5173;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # Backend API
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### 5 —Ç–∏–ø–æ–≤ —Ä–æ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –¥–æ—Å—Ç—É–ø –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É, –æ—Ç—á–µ—Ç–∞–º, –ø—Ä–æ—Ö–æ–¥–∞–º
3. **–ú–µ–Ω–µ–¥–∂–µ—Ä** - –¥–æ—Å—Ç—É–ø –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –∏ –æ—Ç—á–µ—Ç–∞–º
4. **–û–ø–µ—Ä–∞—Ç–æ—Ä** - –±–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
5. **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞—à–±–æ—Ä–¥–∞

### –ú–∞–ø–ø–∏–Ω–≥ –≤–Ω–µ—à–Ω–∏—Ö –≥—Ä—É–ø–ø AD/SSO

–í —Ä–∞–∑–¥–µ–ª–µ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏" –º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –≥—Ä—É–ø–ø—ã Active Directory –∏–ª–∏ SSO –∫ —Ä–æ–ª—è–º —Å–∏—Å—Ç–µ–º—ã:

```
–ü—Ä–∏–º–µ—Ä:
dl-human-monitor-admin ‚Üí –†–æ–ª—å: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
dl-security-team ‚Üí –†–æ–ª—å: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
```

–ü—Ä–∏ SSO –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Ä–æ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ–≥–æ –≥—Ä—É–ø–ø.

## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- **–î–∞—à–±–æ—Ä–¥** —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–∞—à–±–æ—Ä–¥–æ–≤** (drag-and-drop –≤–∏–¥–∂–µ—Ç—ã, MySQL/MQTT –∏—Å—Ç–æ—á–Ω–∏–∫–∏)
- **–û—Ç—á–µ—Ç –æ –ø—Ä–æ—Ö–æ–¥–∞—Ö** —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ Excel
- **–ü–æ–∏—Å–∫ –ø–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É** (–Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö XXX.XXXXXX –∏ 13 —Ü–∏—Ñ—Ä)
- **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —á–µ–ª–æ–≤–µ–∫** - –ø–æ–∏—Å–∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
- **–û—Ç—á–µ—Ç—ã –ø–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º** —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º
- **–û—Ç—á–µ—Ç—ã –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º** —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º
- **–ü–∞—Ä–∫–æ–≤–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏** - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, —Å–º–µ–Ω–∞ —Ä–æ–ª–µ–π
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ä–æ–ª–µ–π, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤, –º–∞–ø–ø–∏–Ω–≥ AD/SSO –≥—Ä—É–ø–ø
- **–õ–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π
- **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- **SSO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- –°–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—â–µ–π
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –û—Ç—á–µ—Ç –ø–æ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# Backend
sudo systemctl status utmn-security

# Nginx
sudo systemctl status nginx

# MySQL
sudo systemctl status mysql
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# Backend –ª–æ–≥–∏
sudo journalctl -u utmn-security -f

# Nginx –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log
sudo tail -f /var/log/nginx/access.log

# MySQL –ª–æ–≥–∏
sudo tail -f /var/log/mysql/error.log
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
mysqldump -u root -p utmn_security > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
mysql -u root -p utmn_security < backup_20260123.sql
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
cd /opt/utmn-security

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
sudo systemctl stop utmn-security

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥
git pull

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install
cd backend && npm install && cd ..

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)
mysql -u root -p utmn_security < database/migrations/xxx.sql

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
sudo systemctl start utmn-security
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ MySQL
sudo systemctl status mysql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mysql -u root -p
SHOW GRANTS FOR 'utmn_remote'@'%';

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall
sudo ufw status
```

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo journalctl -u utmn-security -n 100

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat /opt/utmn-security/backend/.env

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
cd /opt/utmn-security/backend
node src/server.js
```

### Nginx –æ—à–∏–±–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã.

---

**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 1.0  
**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 23.01.2026  
**–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:** –¢—é–º–ì–£ (–¢—é–º–µ–Ω—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç)